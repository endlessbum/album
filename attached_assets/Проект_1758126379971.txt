Техническое описание проекта «Endlessalbum»

## Идея и роли
Проект опирается на максимально минималистичный, лаконичный дизайн и общую учётную запись пары. Первый зарегистрированный пользователь — главный администратор: он управляет приглашениями и правами, а также назначает роли второму и последующим участникам.

- **Роли и приглашения.** Первый пользователь становится главным администратором; он единственный видит код приглашения, приглашает второго пользователя и при необходимости выдаёт дополнительные приглашения.  
  — Первый приглашённый автоматически получает роль «равноправный администратор». Остальным по умолчанию назначается роль «гость», при этом администратор может выдать гостю выборочные привилегии.  
  — Управлять правами первого администратора нельзя; второй администратор не может ограничивать его действия.  
  — В личном кабинете главного администратора в «Настройки ⇒ Доступ» доступны назначение ролей и права просмотра конкретного контента гостями.

---

## Авторизация (интерфейс и технологии)
Экран авторизации выполнен в лёгкой светлой гамме с эффектами матового стекла; стиль сдержанный и интуитивный. Используемый стек: **HTML, CSS, JavaScript, React, Next.js, Django, Netlify, Replit Database (встроенная база данных), MailerSend, Google OAuth, Yandex Object Storage, энд-ту-энд шифрование, JWT, Sentry, Product analytics**. Три вкладки: «Вход», «Регистрация», «Приглашение» (стартовая — «Вход»).

- **Макет и поведение.** Справа — окно авторизации (матовое стекло), слева — логотип и текст-манифест (также матовое стекло). Заголовки вкладок над окном; при переключении — анимация жидкого стекла (как в iOS 26, представленной 9 июня 2025/выходом 15 сентября 2025, с эффектом преломления).
  — Поля «Вход»: email/никнейм, пароль, кнопка «Войти».  
  — Поля «Регистрация»: email, никнейм, пароль, подтверждение пароля, кнопка «Зарегистрироваться».  
  — Поля «Приглашение»:  
   • «У меня есть аккаунт»: email/никнейм, пароль, код приглашения, «Присоединиться».  
   • «У меня нет аккаунта»: email, никнейм, пароль, подтверждение, код приглашения, «Присоединиться».  
  — Пароли скрыты точками, есть иконка показать/скрыть. Email и никнейм — уникальны. Email — для подтверждения регистрации; внутри приложения отображается только никнейм.  
  — Восстановление пароля — по почте.  
  — Футер по центру и закреплён внизу: **© 2025 (год создания) — xxxx (текущий год) Endlessalbum · Сделано с любовью · Политика конфиденциальности (ссылка) · Пользовательское соглашение (ссылка) · Все права защищены.**

---

## Стиль и оформление
Весь интерфейс — светлая ахроматическая эстетика с матовым стеклом поверх тёмного фона по умолчанию. Есть переключение темы (тёмная/светлая), анимации переходов и настройка шрифта.

- **Элементы и атрибуты.** Все блоки — в стиле матового стекла (как iOS 26). Кнопки вытянутые и скруглённые: подтверждающие — голубой фон/белый текст; второстепенные — белый фон/чёрный текст или стеклянные/белый текст.  
  — На основе логотипа создать фавикон и использовать без визуальных изменений.  
  — В «Настройки ⇒ Оформление» доступны: тема, анимации переходов, выбор шрифта.  
  — Минималистичный видеоплеер стилизован под веб-приложение (перемотка/пауза на главной и в чате).
  — Фон приложения белый или графитово-серый (в зависимости от выбранной гаммы: темная или светлая).
  — Акцентные цвета лишь в некоторых элементах управления.
  — Фон не должен брать на себя внимание.

---

## Главная страница
После входа доступна лента историй и плиток (цитаты, фото, видео) с автоадаптацией размеров. Постоянно отображается аватар второй половинки с зелёным свечением «в сети», добавление второй половинки происходит вводом индивидуального никнейма пользователя с запросом на его аккаунт. Он у себя в таком же окошке на главное странице видит запрос (подтвердить, отклонить). После у обоих администраторов появляется информация друг друга (Аватар, время последнего захода и никнейм). Никнейм добавленного партнера (второго администратора) можно изменить на тот что ближе тебе, он будет выделяться больше, но настоящий никнейм пользователя остается рядом (менее виден). Аккаунт общий, но сценарии персонализированы под текущего пользователя; администраторы равноправны.

- **Контент и взаимодействие.** Карточки переворачиваются; на обороте — текст, ссылка/ID карточки и никнейм автора. При нажатии на карточку события на
главном экране (фото, видео или текстовое) оно появляется в увеличенном виде размывая все элементы заднего фона, а под ним появляется возможность написать комментарий или ответить на оставленный комментарий. Справа вверху появляется кнопка "настройка" для редактирования доступа приватности к данному событию гостям (включение/выключение видимости для определенного гостя администратором поделившийся событием)
  — Функции: просмотр, сортировка (по дате и др.), поиск (по дате/хэштегу/ключевым словам), пасхалки «в этот день…», закрепы, таймеры и счётчики событий.  
  — Счётчики/таймеры добавляются админами в личном кабинете и видны обоим; на главной одновременно — до трёх таймеров/счётчиков.  
  — Контент можно создавать на главной и в личном кабинете.  
  — Вишлист каждого пользователя настраивается в кабинете и виден партнёру (название, изображение, ссылка).  
  — При создании события/истории/таймера указывается видимость для гостей; к постам с фото/видео добавляется текст.  
  — Карточки разных размеров и форм, авто-группировка по дате (от свежих к старым), единый стиль.  
  — Комментарии под событиями доступны всем, гости тоже могут комментировать; админы могут удалять комментарии.  
  — Фон главного экрана меняется в «Настройки ⇒ Оформление».
  — Добавить возможность выбора превью для загружающегося видео.

---

## Личный кабинет и чаты
Личный кабинет повторяет минималистичный стиль, хранит код приглашения администратора (обновляется после использования) и запросы на подтверждение новых участников. Чаты — только «один на один», приглашение инициирует администратор из числа пользователей аккаунта.

- **Приватность и поведение чата.** Доступ к личным сообщениям защищён дополнительным паролем (ввод и подтверждение); восстановление — по почте.  
  — Эмоции к сообщениям партнёра (личные минималистичные эмодзи).  
  — Сменить собеседника можно лишь при его добровольном выходе. Заморозка/удаление чата или аккаунта — только по взаимному согласию. Удалять свои сообщения/вложения в чате нельзя.  
  — Совместное присутствие в чате — мягкий зелёный пульс в шапке; при выходе одного — исчезает.  
  — Эфемерные сообщения: видео до 10 с — хранятся 2 мин; фото — 2 мин. После — остаётся значок («видеосообщение»/«фото»). Если сообщение открыто до автоудаления, на просмотр остаётся 10 с.  
  — Можно прикреплять фото/видео без автоудаления (как вложения).  
  — Анимации совпадающих слов (напр., «люблю» притягивает сообщения); в «Настройки ⇒ Сообщения» — ≥10 готовых пресетов и возможность добавлять свои.  
  — «Стоп-слово» с префиксом «&» временно блокирует чат обоих на 10 мин; повторное использование — раз в сутки; настраивается в «Настройки ⇒ Сообщения».  
  — В профиле, доступном партнёру: статус, фото, вишлист, отметка «был(а) в сети…».  
  — Никнейм можно менять, если свободен; прежний остаётся привязан к пользователю.  
  — Нотификации партнёру в реальном времени (email, веб-push).  
  — Возможность добавлять в посты видео и фото.
  — Возможность отправлять голосовые сообщения в чате (поставить на паузу и воспроизвести).
  — При возможности — доступ к календарю устройства для дублирования событий.  
  — Раздел «Игры» в кабинете и на главной: «Правда или действие», «Угадай меня», «Ассоциации», «Камень-ножницы-бумага», «Кто быстрее нажмёт», «Крестики-нолики», «Собери слово», «Виселица» — все в общей стилистике.  
  — Обои личного чата настраиваются в «Настройки ⇒ Сообщения»: каждый админ меняет у себя; при смене — уведомление с миниатюрой. Второй собеседник может просмотреть и установить такие же (кнопка «установить в чате»).

---

## Настройки
Раздел «Настройки» — центр управления доступом, профилем, оформлением, сообщениями, уведомлениями, событиями/счётчиками и играми.

- **Доступ.** Управление приглашениями (только главный админ), просмотр/копирование кода, подтверждение участников по коду, назначение ролей (равноправный администратор/гость), права гостей на просмотр контента и видимость конкретных постов/событий/таймеров.  
- **Профиль.** Смена никнейма (если свободен), изменение фото/аватара, статус и отметка «был(а) в сети…», настройка вишлиста.  
- **Оформление.** Переключение темы, включение/отключение анимаций переходов, выбор шрифта интерфейса.  
- **Сообщения.** Выбор/добавление анимаций совпадающих слов, настройка «стоп-слова» (&), смена/восстановление пароля доступа к ЛС, выбор/добавление обоев чата.  
- **Уведомления.** Настройка email и push в реальном времени, напоминания о событиях/счётчиках/таймерах.  
- **События и счётчики.** Включение/отключение отдельных таймеров/счётчиков, видимость событий для гостей, подключение календаря устройства (если доступно).  
- **Игры.** Загрузка и редактирование списков вопросов/заданий («Правда или действие» и др.).

---

## Игры
- Поддержка Reinforcement Learning и Text-generation models (между двумя администраторами).

---

## Приложение
Проект предусматривает резервное копирование, полностью адаптивную мобильную версию и закрытый доступ к страницам для незарегистрированных. Визуально используется ровно вложенный логотип (без изменений).

- **Требования.** Бэкапы; адаптив; блокировка гостевого доступа к приватным страницам; логотип из файла без модификаций.

---

## Пользовательское соглашение и политика конфиденциальности
Нужно разработать пользовательское соглашение и политику конфиденциальности с учётом потенциальных рисков, исключая возложение ответственности за использование сервиса на разработчика.

- **Документы.** Условия использования на базе проекта; политика конфиденциальности на базе проекта.

---

## Тестирование
Для тестирования работы сайта применяются личные данные заказчика (см. вложение).

- **Данные.** Использовать предоставленные во вложении ровно для целей тестирования.

---

Дополнительные системные компоненты и интеграции (встроены в контекст)

## Product analytics: PostHog / Amplitude / Mixpanel
Аналитика продукта нужна для измерения **retention**, активностей и воронок, чтобы принимать продуктовые решения на данных.

- **Где применяется.** Главная (события просмотра/взаимодействий), Личный кабинет и Чаты (отправки/просмотры, реакции, игры), Авторизация (конверсия входа/регистрации/приглашений), Настройки (изменения параметров).  
- **Что отслеживаем.** DAU/WAU/MAU, Retention (D1/D7/D30), воронки регистрации/приглашения/создания первого контента, удержание по фичам (чаты, игры, таймеры).  
- **Выводы.** По метрикам решаем приоритеты фич и улучшения UX.

## Логирование и мониторинг: Sentry / Prometheus / Grafana
Система наблюдаемости позволяет **видеть ошибки и нагрузку** в реальном времени и реагировать до инцидентов.

- **Где применяется.** Веб-клиент (Sentry для фронта), бэкенд (Sentry для исключений, Prometheus метрики, Grafana дашборды), инфраструктура (аптайм и ресурсы).  
- **Что даёт.** Трекинг ошибок по релизам, алёрты при деградации, графики RPS/латентности/ошибок.

## API-first: REST / GraphQL
Единая **API-платформа** позволяет фронтенду, мобильному приложению и играм работать с одними и теми же данными.

- **Где применяется.** Бэкенд Django публикует REST/GraphQL-эндпойнты; все клиенты (веб, мобильный, игры) обращаются к ним.  
- **Принципы.** Версионирование, авторизация, пагинация, фильтры; единые схемы для контента, чатов, событий, игр.

## Micro-interactions с физикой: Framer Motion / Popmotion
Мелкие анимации с инерцией и отзывчивостью создают ощущение «магии» без перегруза интерфейса.

- **Где применяется.** Переключение вкладок авторизации (жидкое стекло), переворот карточек, появление комментариев/реакций, пульс статуса «в сети», hover/press эффект кнопок.  
- **Результат.** Быстрая, живая обратная связь, не нарушающая минимализм.

## Telegram-бот
Бот помогает в коммуникации и сервисных сценариях: **FAQ**, уведомления, автоответчик в чате (при недоступности), и другие интеграции.

- **Где применяется.** Канал поддержки и ассистент: выдаёт ссылки на Политику/Соглашение, подсказки по функциям, может принимать простые команды (например, «код приглашения» — с безопасной проверкой роли).  
- **Замысел.** Подумать о завязке на напоминания о событиях/таймерах и intake обратной связи.

## Skeleton-экраны и shimmer-загрузки
Скелетоны и «шиммер» визуально **ускоряют** работу, показывая структуру до прихода данных.

- **Где применяется.** Главная (лента), Чаты (список/облака), Авторизация (кнопки/поля), Настройки (списки).  
- **Эффект.** Снижение воспринимаемой задержки при загрузке.

## Lottie-анимации
Лёгкие векторные анимации украшают интерфейс и остаются «дешёвыми» по весу.

- **Где применяется.** Пустые состояния, успех/ошибка, пасхалки «в этот день…», мини-индикаторы в играх.  
- **Требование.** Стилистика соответствует общей эстетике (стекло/минимализм).

## Свой видеоплеер
Нативный **минималистичный плеер** для главной и чатов (ранее упомянут в оформлении) — эта секция закрепляет требование.

- **Где применяется.** Просмотр видео в ленте и в сообщениях.  
- **Функции.** Пауза/плей, перемотка, прогресс-бар в стиле приложения; уважение автоудаления для эфемерных видео.

## Gamification SDK
Отдельный слой для **очков/ачивок** без смешивания с бизнес-логикой.

- **Где применяется.** Игры, счётчики событий, пасхалки «в этот день…», взаимодействия в чате (реакции, совпадения слов).  
- **Управление.** В «Настройки ⇒ Игры» — загрузка списков, настройка правил начислений (в рамках SDK).

## Drag&drop загрузка файлов
Упрощённая **загрузка фото/видео** через перетаскивание, в том числе в сообщения и посты.

- **Где применяется.** Главная (создание контента), Личный кабинет (медиа/аватар), Чаты (вложения).  
- **Опыт.** Превью, прогресс, обработка ошибок (Sentry фиксирует сбои).

## Энд-ту-энд шифрование
Для **приватных чатов** — сквозное шифрование сообщений.

- **Где применяется.** Чаты «один на один».  
- **Примечание.** Подчиняется ограничениям эфемерности: шифрование/удаление соблюдают тайминги (2 мин/10 с просмотра).

## Security, privacy и DevSecOps (с самого начала)
Безопасность и приватность встроены в процесс: автоматические проверки, шифрование, защита данных, **privacy by design**.

- **Где применяется.** CI/CD (статический анализ, зависимости), инфраструктура (секреты, бэкапы, контроль доступа), приложение (шифрование данных и каналов, минимизация данных, роль-модель).  
- **Результат.** Снижение рисков, соответствие принципам безопасности и приватности.

## Встроенный переводчик интерфейса (мультиязычность)
Интерфейс поддерживает **несколько языков** и динамический перевод.

- **Где применяется.** «Настройки ⇒ Оформление» (выбор языка); весь UI — через i18n-слой; контент пользователей не переводится автоматически, если не задано отдельно.  
- **Цель.** Удобство использования в разных языковых парах без нарушения стиля.

---

Связи с существующими разделами (коротко)
- **Авторизация/Главная/Чаты** ↔ Product analytics, Skeleton/Shimmer, Lottie, Micro-interactions.  
- **Чаты** ↔ Энд-ту-энд шифрование, эмодзи-реакции, видеоплеер, Telegram-бот (автоответчик).  
- **Настройки** ↔ Права доступа, уведомления, оформление, анимации слов, «стоп-слово», язык, игры, геймификация.  
- **Приложение/Инфраструктура** ↔ API-first, Логирование/Мониторинг, Security/DevSecOps, Бэкапы.

---

## Дополнительные технологии и инструменты

- **Hugging Face Transformers (open source)**  
  Для анализа текста (например, выделение ключевых слов из заметок/постов, авто-теги).

- **TensorFlow.js / PyTorch**  
  Для простых рекомендательных моделей (например, предлагать пользователю воспоминания «в этот день»).

- **OWASP ZAP**  
  Для тестирования безопасности веб-приложения.

- **Sentence Transformers (SBERT)**  
  Для поиска по смыслу в ленте (semantic search).

- **Rasa (open source)**  
  AI-чатбот для поддержки внутри приложения (дополнение к Telegram-боту)..

- **Whisper (OpenAI, open source)**  
  Автоматическая расшифровка голосовых и видеосообщений.

- **DeepL Free API / LibreTranslate**  
  Предложение перевода сообщений в чате, если он отличается от твоего языка (если добавить опцию).

- **Emoji2Vec**  
  Модель для генерации эмоций или эмодзи-реакций по тексту.

- **PWA (офлайн + установка + пуши)**  
  Поддержка установки приложения на устройство, офлайн-режим и push-уведомления.

- **Web Performance & Core Web Vitals**  
  Контроль скорости загрузки и метрик производительности (LCP, CLS, FID).

- **Automatic image/video compression pipeline Yandex Object Storage (если доступно)**  
  Автоматическая оптимизация изображений и видео при загрузке.

- **Lazy loading, virtualization списков (React Virtualized)**  
  Задержанная подгрузка и виртуализация длинных списков.

- **Accessibility audit (axe-core)**  
  Автоматическая проверка доступности интерфейса.

- **Semantic/Vector search (SBERT / Qdrant)**  
  Поиск по смыслу и векторные запросы.

- **Partytown (перенос сторонних скриптов в web workers)**  
  Разгрузка основного потока за счёт вынесения сторонних скриптов.

- **Prefetch/Prerender на базе ML (Quicklink + свои модели)**  
  Предзагрузка и пререндеринг страниц с прогнозом на основе моделей.

- **Passkeys / WebAuthn**  
  Безопасная аутентификация без паролей.

- **CSP Report-Only + SRI**  
  Политика безопасности контента и целостность ресурсов.

- **git-secrets / Talisman**  
  Защита от утечек секретов в репозитории.

- **Honeytokens**  
  Ловушки для отслеживания несанкционированного доступа.